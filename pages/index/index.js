(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{3578:function(e,t,o){"use strict";var n=o("d623"),a=o.n(n);a.a},"3ec8":function(e,t,o){"use strict";o.r(t);var n=o("96ce"),a=o("dd82");for(var i in a)"default"!==i&&function(e){o.d(t,e,(function(){return a[e]}))}(i);o("3578");var r,c=o("f0c5"),s=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);t["default"]=s.exports},6577:function(e,t,o){"use strict";(function(e){o("d3fb"),o("921b");n(o("66fd"));var t=n(o("3ec8"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},"96ce":function(e,t,o){"use strict";var n={"uni-notice-bar":function(){return o.e("components/uni-notice-bar/uni-notice-bar").then(o.bind(null,"052d"))},"uni-popup":function(){return o.e("components/uni-popup/uni-popup").then(o.bind(null,"276e"))}},a=function(){var e=this,t=e.$createElement;e._self._c},i=[];o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return n}))},cfd0:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){o.e("components/uni-notice-bar/uni-notice-bar").then(function(){return resolve(o("052d"))}.bind(null,o)).catch(o.oe)},a=function(){o.e("components/uni-icon/uni-icon").then(function(){return resolve(o("eb44"))}.bind(null,o)).catch(o.oe)},i=function(){o.e("components/uni-popup/uni-popup").then(function(){return resolve(o("276e"))}.bind(null,o)).catch(o.oe)},r=function(){o.e("components/share").then(function(){return resolve(o("ab53"))}.bind(null,o)).catch(o.oe)},c=e.getRecorderManager(),s=e.createInnerAudioContext();s.autoplay=!0;var u={components:{uniNoticeBar:n,uniIcon:a,uniPopup:i,share:r},data:function(){return{title:"这是我的小程序，开始了",defaultKeyword:"111",keyword:"干电池",popupShow:!1,voicePath:"",startTiming:!1,drawTiming:!1,timeoutTiming:!1,maxTime:5e3,frame:50,swiper:[],isShowKeywordList:!1,keywordList:[],randOneObj:{garbageName:"干电池"},randomTip:"",simpleTips:["让垃圾找到自己的归属","请给垃圾找个合适的家","希望有一天，垃圾桶也会下岗","垃圾分类放，环境有保障","垃圾要分类，资源要利用","今天分一分，明天美十分","积极参与垃圾分类，共创优美社区环境","分类收集人人有责，男女老幼齐来参与","提高社区的品味，从垃圾分类开始","垃圾分类，举手之劳","配合垃圾分类，争做文明市民","垃圾分类益处多，环境保护靠你我","要是垃圾变为宝，分类回收不可少","请给垃圾找个合适的家","垃圾儿女要分家，安居乐业靠大家","垃圾分类人人做，做好分类为人人","让垃圾找到自己的归属","垃圾要分类，生活变美好","你我虽渺小，但意义重大","让垃圾找到自己的归属","请给垃圾找个合适的家"]}},onShow:function(){this.randOne(),this.randomTip=this.simpleTips[Math.round(20*Math.random())]},onLoad:function(){var t=this;console.log("typeid:"+getApp().globalData.typeid),e.request({url:t.serverUrl+"/slideShow",success:function(e){console.log(e),console.log(e.data.data),t.swiper=e.data.data}}),console.log(1),c.onStop((function(o){e.showLoading({title:"努力识别中..."}),t.voicePath=o.tempFilePath,t.popupShow=!1;var n=-.5,a=e.createCanvasContext("canvas");t.draw=setTimeout((function(){a.beginPath(),a.setStrokeStyle("#1296db"),a.setLineWidth(3),a.arc(0,0,0,-.5*Math.PI,(n+=2/(t.maxTime/t.frame))*Math.PI,!1),a.stroke(),a.draw()}),1),e.uploadFile({url:t.serverUrl+"/upload/record",filePath:t.voicePath,name:"file",success:function(o){console.log(o.data);var n=JSON.parse(o.data);console.log(n),console.log(n.data);var a=n.data,i=JSON.stringify(a.uni);t.keyword=a.keyword,t.isShowKeywordList=!0,t.keywordList=JSON.stringify(a.results),console.log(" keywordList"),console.log(t.keywordList),e.navigateTo({url:"/pages/search/search?keyword=".concat(t.keyword,"&keywordList=").concat(t.keywordList,"&uni=").concat(i)}),e.hideLoading()}})}))},methods:{randOne:function(){var t=this;e.request({url:this.serverUrl+"/qb/randOne",success:function(e){console.log(e),console.log(e.data.data),t.randOneObj=e.data.data[0],t.keyword=e.data.data[0].garbageName}})},navigateTo:function(t){e.navigateTo({url:"/pages/webview/webview?url="+t})},searchKeyword:function(){var t=this;t.keyword&&e.request({url:t.serverUrl+"/qb/uniname/"+t.keyword,success:function(o){console.log(o);var n=o.data.data,a=JSON.stringify(n.uni),i=JSON.stringify(n.results);console.log(o.data.data),e.navigateTo({url:"/pages/search/search?type=3&keyword=".concat(t.keyword,"&keywordList=").concat(i,"&uni=").concat(a)})}})},readyRecord2:function(){e.navigateTo({url:"/pages/search/search?type=2"})},readyRecord:function(){this.popupShow=!0},start:function(){console.log("startTiming"),this.startTiming=setTimeout(this.recording,150)},end:function(){console.log("录音 end"),c.stop(),clearInterval(this.draw),clearTimeout(this.startTiming),clearTimeout(this.timeoutTiming),this.draw=!1,this.startTiming=!1,this.timeoutTiming=!1},recording:function(){var t=this;console.log("录音开始"),c.start();var o=-.5,n=e.createCanvasContext("canvas");t.draw=setInterval((function(){n.beginPath(),n.setStrokeStyle("#1296db"),n.setLineWidth(3),n.arc(75,75,50,-.5*Math.PI,(o+=2/(t.maxTime/t.frame))*Math.PI,!1),n.stroke(),n.draw()}),t.frame),t.timeoutTiming=setTimeout((function(){clearInterval(t.draw),t.draw=!1,console.log("时间到，录音结束"),c.stop()}),t.maxTime)},playVoice:function(){var e=this;console.log(" 点击 播放"),console.log(e.voicePath),e.voicePath&&(s.src=e.voicePath,s.play(),console.log("播放了声音"))},hidePopup:function(){this.popupShow=!1},handleSearchEvent:function(){console.log("click icon")},switchTabToClassify:function(t){console.log(t),getApp().globalData.typeid=t,e.switchTab({url:"/pages/type/type"})},gotoSearch:function(){e.navigateTo({url:"/pages/search/search"})},takePhoto2:function(){e.navigateTo({url:"/pages/search/search?type=1"})},takePhoto:function(){var t=this;e.chooseImage({count:1,success:function(o){t.imagePath=o.tempFilePaths[0],console.log(t.imagePath),e.showLoading({title:"努力识别中..."}),e.uploadFile({url:t.serverUrl+"/upload/image",filePath:o.tempFilePaths[0],name:"file",success:function(o){console.log(o.data);var n=JSON.parse(o.data);console.log(n),console.log(n.data);var a=n.data,i=JSON.stringify(a.uni);t.keyword=a.keyword,t.isShowKeywordList=!0,t.keywordList=JSON.stringify(a.results),console.log(" keywordList"),console.log(t.keywordList),e.navigateTo({url:"/pages/search/search?keyword=".concat(t.keyword,"&keywordList=").concat(t.keywordList,"&uni=").concat(i)})},complete:function(){e.hideLoading()}})}})}}};t.default=u}).call(this,o("543d")["default"])},d623:function(e,t,o){},dd82:function(e,t,o){"use strict";o.r(t);var n=o("cfd0"),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,(function(){return n[e]}))}(i);t["default"]=a.a}},[["6577","common/runtime","common/vendor"]]]);